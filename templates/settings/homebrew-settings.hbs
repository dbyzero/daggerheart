<div>
    {{formGroup settingFields.schema.fields.maxFear value=settingFields._source.maxFear localize=true}}

    <h4>{{localize "DAGGERHEART.Settings.Homebrew.FIELDS.traitArray.label"}}</h4>
    <div class="trait-array-container">
        {{#each settingFields._source.traitArray as |trait index|}}
            <div class="trait-array-item">
                <label>{{localize "DAGGERHEART.General.Modifier"}} {{add index 1}}</label>
                <input type="text" data-dtype="Number" name="{{concat "traitArray." index}}" value="{{this}}" />
            </div>
        {{/each}}
    </div>

    <fieldset class="two-columns even">
        <legend>{{localize "DAGGERHEART.Settings.Homebrew.DowntimeMoves"}}</legend>

        <fieldset>
            <legend>
                {{localize "DAGGERHEART.Downtime.LongRest.title"}} 
                <a data-action="addItem" data-type="longRest"><i class="fa-solid fa-plus"></i></a>
                <a data-action="resetMoves" data-type="longRest"><i class="fa-solid fa-arrow-rotate-left"></i></a>
            </legend>

            <div class="form-group setting-group-field">
                <label>{{localize "DAGGERHEART.Settings.Homebrew.NrChoices"}}</label>
                <div class="form-fields">
                    <input type="text" name="restMoves.longRest.nrChoices" value="{{settingFields._source.restMoves.longRest.nrChoices}}" />
                </div>
            </div>
            
            <div class="settings-items">
                {{#each settingFields._source.restMoves.longRest.moves as |move id|}}
                    {{> "systems/daggerheart/templates/settings/components/settings-item-line.hbs" this type="longRest" id=id }}
                {{/each}}
            </div>
        </fieldset>

        <fieldset>
            <legend>
                {{localize "DAGGERHEART.Downtime.ShortRest.title"}}
                <a data-action="addItem" data-type="shortRest"><i class="fa-solid fa-plus"></i></a>
                <a data-action="resetMoves" data-type="shortRest"><i class="fa-solid fa-arrow-rotate-left"></i></a>
            </legend>

            <div class="form-group setting-group-field">
                <label>{{localize "DAGGERHEART.Settings.Homebrew.NrChoices"}}</label>
                <div class="form-fields">
                    <input type="text" name="restMoves.shortRest.nrChoices" value="{{settingFields._source.restMoves.shortRest.nrChoices}}" />
                </div>
            </div>

            <div class="settings-items">
                {{#each settingFields._source.restMoves.shortRest.moves as |move id|}}
                    {{> "systems/daggerheart/templates/settings/components/settings-item-line.hbs" this type="shortRest" id=id }}
                {{/each}}
            </div>
        </fieldset>
    </fieldset>
   
    <footer class="form-footer">
        <button data-action="reset">
            <i class="fa-solid fa-arrow-rotate-left"></i>
            <span>{{localize "Reset"}}</span>
        </button>
        <button data-action="save" >
            <i class="fa-solid fa-floppy-disk"></i>
            <span>{{localize "Save Changes"}}</span>
        </button>
    </footer>
</div>
  